<!DOCTYPE html>
<html lang="zh" ng-app="fresh-admin" ng-controller="tbItemCatController" ng-init="findByParentId(0);selectOptionList()">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>商品分类</title>
<!-- Page basic information -->
<meta name="description" content="{{adminConfig.description}}">
<meta name="keywords" content="{{adminConfig.keywords}}">
<meta name="author" content="{{adminConfig.author}}">
<!-- Page icon information -->
<link rel="shortcut icon" href="../favicon.ico" />
<!-- Tell the browser to be responsive to screen width -->
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<!-- Bootstrap -->
<link rel="stylesheet" href="../plugins/bootstrap/css/bootstrap.min.css">
<!-- Font-Awesome -->
<link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="../plugins/ionicons/css/ionicons.min.css">
<!-- Roboto -->
<link rel="stylesheet" href="../plugins/roboto/css/roboto.min.css">
<!-- AdminLTE -->
<link rel="stylesheet" href="../plugins/adminlte/css/adminlte.min.css">
<!-- AdminLTE skins -->
<link rel="stylesheet" href="../plugins/adminlte/css/skins/_all-skins.min.css">
<!-- zeroModal -->
<link rel="stylesheet" href="../plugins/zeroModal/css/zeroModal.min.css">
<!-- iCheck -->
<link rel="stylesheet" href="../plugins/iCheck/all.min.css">
<!-- Paging -->
<link rel="stylesheet" href="../plugins/tm-pagination/css/pagination.min.css">
<!-- Select2 -->
<link rel="stylesheet" href="../plugins/select2/select2.css">
<link rel="stylesheet" href="../plugins/select2/select2-bootstrap.css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script type="text/javascript" src="../plugins/html5shiv/html5shiv.min.js"></script>
  <script type="text/javascript" src="../plugins/respond/respond.min.js"></script>
<![endif]-->
</head>
<body class="hold-transition {{adminConfig.theme}} sidebar-mini">
	<!-- Page Wrapper Start -->
	<div class="wrapper">
		<!-- Box Header Start -->
		<div class="box-header with-border">
			<ul class="breadcrumb" style="margin-bottom: 0px;">
				<li><a href="javascript:;" onclick="window.location.href='welcome.html';">后台首页</a></li>
				<li><a href="javascript:;" onclick="window.location.reload();">商品分类</a></li>
			</ul>
		</div>
		
		 <!-- Paging Start 您现在所在的分类 -->
			<div class="clearfix">
				<div class="pull-left" style="height: 70px; line-height: 70px;">
					<ul class="breadcrumb" style="margin-bottom: 0px;padding: 0px;background: transparent;" id="menus">
						<!--<li><a href="javascript:;">顶级分类</a></li>
						<li ><a href="javascript:;">XXX1</a></li>
						<li ><a href="javascript:;">XXX2</a></li>-->
					</ul>
				</div>
				<div class="pull-right" style="height: 70px; line-height: 70px;">
					<button class="btn btn-sm btn-default" onclick="window.print();">打印</button>
				</div>
			</div>
			<!-- Paging End -->
			
		<!-- Box Header End -->

		<!-- Box Body Start -->
		<div class="box-body">
			<!-- Tool Start -->
			<div class="clearfix" style="margin-bottom: 10px">
				<div class="pull-left">
					<div class="input-group input-group-sm">
						<div class="btn-group">
							<button type="button" class="btn btn-default" title="新建" data-toggle="modal" data-target="#editModal" ng-click="entity={};image_entity={}">
								<i class="fa fa-plus"></i> 新建
							</button>
							<button type="button" class="btn btn-default" title="删除" ng-click="deleteList()">
								<i class="fa fa-trash"></i> 删除
							</button>
							<button type="button" class="btn btn-default" title="刷新" onclick="window.location.reload();">
								<i class="fa fa-refresh"></i> 刷新
							</button>
						</div>
					</div>
				</div>
				<div class="pull-right">
					<div class="input-group input-group-sm" style="width: 150px;">
						<input type="text" class="form-control pull-right" placeholder="分类名字" id="name">
						<!--页面藏值 默认值0 parent_id-->
            <input type="hidden"  id="parent_id" value="0"/>
						<div class="input-group-btn">
							<button type="submit" class="btn btn-default" onclick="loadData(1)">
								<i class="fa fa-search"></i>
							</button>
						</div>
					</div>
				</div>
			</div>
			<!-- Tool End -->
<!--数据展示区域-->
<textarea id="template" style="display: none;">
			<table class="table table-bordered table-striped table-hover dataTable">
				<thead>
					<tr>
						<td style="vertical-align: middle; text-align: center;"></td>
						<th style="vertical-align: middle; text-align: center;">分类序号</th>
						<th style="vertical-align: middle; text-align: center;">分类名称</th>
						<th style="vertical-align: middle; text-align: center;">分类图片</th>
						<th style="vertical-align: middle; text-align: center;">模板类型</th>
						
						<th style="vertical-align: middle; text-align: center;">操作</th>
					</tr>
				</thead>
				<tbody>
						{#foreach $T.data.records as record}
					<tr ng-repeat="entity in list">
						<td style="vertical-align: middle; text-align: center;"><input type="checkbox" ng-click="selectOne($event,entity.id)" style="width: 16px; height: 16px; cursor: pointer;"></td>
						<td style="vertical-align: middle; text-align: center;">{$T.record.id}</td>
						<td style="vertical-align: middle; text-align: center;">{$T.record.name}</td>
						<td style="vertical-align: middle; text-align: center;" ng-if="entity.image!=null"><img src="{$T.record.image}" width="100px" height="100px"></td>	
						<td style="vertical-align: middle; text-align: center;" ng-if="entity.typeId!=null">{$T.record.typeId}</td>
						<td style="vertical-align: middle; text-align: center;">
							<span ng-if="grade<3"><button name="xiayiji" class="btn btn-sm bg-olive color-palette" onclick="queryData({$T.record.id});">查询下级</button></span>
							<button class="btn btn-sm bg-light-blue color-palette" data-toggle="modal" data-target="#editModal" ng-click="findOne(entity.id)">修改</button>
							<button class="btn btn-sm bg-red color-palette" ng-click="deleteOne(entity.id)">删除</button>
						</td>
					</tr>
					{#/for}
				</tbody>
			</table>
			<!-- 分页组件 -->
								<div class="row" style="text-align: right">
									<div class="col-sm-12"><div class="dataTables_paginate paging_bootstrap" id="sample-table_paginate">
										<ul class="pagination">
											 {#if $T.data.pageNumber==1}
												<li>
													<li class="prev"><a disabled style="cursor: not-allowed" href="#">上一页</a></li>
											   </li>
										    {#else}
												<li>
													<li class="prev"><a href="javascript:loadData({$T.data.pageNumber-1});">上一页</a></li>
												</li>
										    {#/if}
										    
										    {#foreach $T.data.numbers as record}
											      <li lang="nums"><a href="javascript:loadData({$T.record});">{$T.record}</a></li>
											   {#/for}
											
												{#if $T.data.pageNumber==$T.data.pageCount}
													<li>
													<li class="next"><a disabled style="cursor: not-allowed" >下一页</a></li>
												</li>
												{#else}
													<li>
														<li class="next"><a href="javascript:loadData({$T.data.pageNumber+1});">下一页</a></li>
												    </li>
												{#/if}

											<li class="next"><a href="#" >共{$T.data.pageNumber}/{$T.data.pageCount}页</a></li>
											<li class="next"><a href="#">共{$T.data.totalCount}条</a></li>
										</ul>
									</div>
									</div>
								</div>
							<!-- 分页组件 -->
</textarea>
      <!-- 数据展示区 -->
			<div id="res"></div>
			<!-- Data End -->
		</div>
		<!-- Box Body End -->

		<!-- Modal Start -->
		<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">
							<small>商品分类编辑</small>
						</h4>
					</div>
					<div class="modal-body">
						<table class="table table-bordered table-striped table-hover dataTable" width="800px" style="margin-bottom: 0px;">
							<tr>
								<td style="vertical-align: middle; text-align: center;">当前位置</td>
								<td style="vertical-align: middle; text-align: left;">
									<ul class="breadcrumb" style="margin-bottom: 0px;padding: 0px;background: transparent;">
										<li><a href="javascript:;">顶级分类</a></li>
										<li ng-if="entity_1!=null"><a href="javascript:;">{{entity_1.name}}</a></li>
										<li ng-if="entity_2!=null"><a href="javascript:;">{{entity_2.name}}</a></li>
									</ul>
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">类目名称</td>
								<td style="vertical-align: middle; text-align: left;"><input type="text" class="form-control" ng-model="entity.name" placeholder="类目名称"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">分类图片</td>
								<td>
									<div class="width:100%;height:40px;line-height:40px;clear:both"><input type="file" id="file" style="display: inline-block;outline: none;"><button ng-click="uploadFile()" style="float: right">上传图片</button></div>
									<div ng-if="image_entity.url!=null">
										<img ng-src="{{image_entity.url}}" height="450px" width="100%" style="margin-top: 10px; border: 1px solid gray;">
									</div>
								</td>
							</tr>							
							<tr>
								<td style="vertical-align: middle; text-align: center;">模板类型</td>
								<td style="vertical-align: middle; text-align: left;">
									<input select2 ng-model="entity.typeId" config="typeTemplateList" type="text" class="form-control" placeholder="模板类型">
								</td>
							</tr>

						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" aria-hidden="true">关闭</button>
						<button type="button" class="btn btn-success pull-right" data-dismiss="modal" aria-hidden="true" ng-click="save()">保存</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal End -->
	</div>
	<!-- Page Wrapper End -->
	<!-- JQuery -->
	<script type="text/javascript" src="../plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script type="text/javascript" src="../plugins/bootstrap/js/bootstrap.min.js"></script>
	<!-- SlimScroll -->
	<script type="text/javascript" src="../plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script type="text/javascript" src="../plugins/fastclick/fastclick.min.js"></script>
	<!-- AdminLTE -->
	<script type="text/javascript" src="../plugins/adminlte/js/adminlte.min.js"></script>
	<!-- zeroModal -->
	<script type="text/javascript" src="../plugins/zeroModal/js/zeroModal.min.js"></script>
	<!-- iCheck -->
	<script type="text/javascript" src="../plugins/iCheck/icheck.min.js"></script>
	<!--引入模板引擎-->
	<script src="../js/jquery.jtemplates.js" type="text/javascript"></script>
	<!--引入外部JS-->
	<script src="../js/tbItemCat.js" type="text/javascript"></script>
</body>
</html>
