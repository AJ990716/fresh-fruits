<!DOCTYPE html>
<html lang="zh" ng-app="fresh-admin" ng-controller="tbContentController" ng-init="findContentCategoryList()">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>内容管理</title>
<!-- Page basic information -->
<meta name="description" content="{{adminConfig.description}}">
<meta name="keywords" content="{{adminConfig.keywords}}">
<meta name="author" content="{{adminConfig.author}}">
<!-- Page icon information -->
<link rel="shortcut icon" href="../favicon.ico" />
<!-- Tell the browser to be responsive to screen width -->
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<!-- Bootstrap -->
<link rel="stylesheet" href="../plugins/bootstrap/css/bootstrap.min.css">
<!-- Font-Awesome -->
<link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="../plugins/ionicons/css/ionicons.min.css">
<!-- Roboto -->
<link rel="stylesheet" href="../plugins/roboto/css/roboto.min.css">
<!-- AdminLTE -->
<link rel="stylesheet" href="../plugins/adminlte/css/adminlte.min.css">
<!-- AdminLTE skins -->
<link rel="stylesheet" href="../plugins/adminlte/css/skins/_all-skins.min.css">
<!-- zeroModal -->
<link rel="stylesheet" href="../plugins/zeroModal/css/zeroModal.min.css">
<!-- iCheck -->
<link rel="stylesheet" href="../plugins/iCheck/all.min.css">
<!-- Paging -->
<link rel="stylesheet" href="../plugins/tm-pagination/css/pagination.min.css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script type="text/javascript" src="../plugins/html5shiv/html5shiv.min.js"></script>
  <script type="text/javascript" src="../plugins/respond/respond.min.js"></script>
<![endif]-->
</head>
<body class="hold-transition {{adminConfig.theme}} sidebar-mini">
	<!-- Page Wrapper Start -->
	<div class="wrapper">
		<!-- Box Header Start -->
		<div class="box-header with-border">
			<ul class="breadcrumb" style="margin-bottom: 0px;">
				<li><a href="javascript:;" onclick="window.location.href='welcome.html';">后台首页</a></li>
				<li><a href="javascript:;" onclick="window.location.reload();">内容列表</a></li>
			</ul>
		</div>
		<!-- Box Header End -->

		<!-- Box Body Start -->
		<div class="box-body">
			<!-- Tool Start -->
			<div class="clearfix" style="margin-bottom: 10px">
				<div class="pull-left">
					<div class="input-group input-group-sm">
						<div class="btn-group">
							<button type="button" class="btn btn-default" title="新建" data-toggle="modal" data-target="#addModal" ng-click="entity={}">
								<i class="fa fa-plus"></i> 新建
							</button>
							<button type="button" class="btn btn-default" title="删除" ng-click="deleteList()">
								<i class="fa fa-trash"></i> 删除
							</button>
							<button type="button" class="btn btn-default" title="刷新" onclick="window.location.reload();">
								<i class="fa fa-refresh"></i> 刷新
							</button>
						</div>
					</div>
				</div>
				<div class="pull-right">
					<div class="input-group input-group-sm" style="width: 150px;">
						<input type="text" class="form-control pull-right" placeholder="广告标题" id="queryData">

						<div class="input-group-btn">
							<button type="submit" class="btn btn-default" onclick="loadData(1)">
								<i class="fa fa-search"></i>
							</button>
						</div>
					</div>
				</div>
			</div>
			<!-- Tool End -->
			<!--数据展示区域-->
			<textarea id="template" style="display: none;">
				<table class="table table-bordered table-striped table-hover dataTable">
					<thead>
						<tr>
							<td style="vertical-align: middle; text-align: center;"></td>
							<th style="vertical-align: middle; text-align: center;">内容主键</th>
							<th style="vertical-align: middle; text-align: center;">内容标题</th>
							<th style="vertical-align: middle; text-align: center;">广告分类名称</th>
							<th style="vertical-align: middle; text-align: center;">内容地址</th>
							<th style="vertical-align: middle; text-align: center;">内容图片</th>
							<th style="vertical-align: middle; text-align: center;">内容排序</th>
							<th style="vertical-align: middle; text-align: center;">内容状态</th>
							
							<th style="vertical-align: middle; text-align: center;">操作</th>
						</tr>
					</thead>
					<tbody>
						{#foreach $T.data.records as record}
						<tr ng-repeat="entity in list">
								<td style="vertical-align: middle; text-align: center;"><input type="checkbox" click="selectOne($event,entity.id)" style="width: 16px; height: 16px; cursor: pointer;"></td>
								<td style="vertical-align: middle; text-align: center;">{$T.record.id}</td>
								<td style="vertical-align: middle; text-align: center;">{$T.record.title}</td>
								<td style="vertical-align: middle; text-align: center;">{$T.record.categoryName}</td>
								<td style="vertical-align: middle; text-align: center;"><a href="{$T.record.url}" target="_blank">{$T.record.url}</a></td>
								<td style="vertical-align: middle; text-align: center;"><img src="{$T.record.image}" width="500px" height="145px"></td>
								<td style="vertical-align: middle; text-align: center;">{$T.record.orders}</td>
								<td style="vertical-align: middle; text-align: center;">{$T.record.status==1?'启用':'禁用'}</td>
								
								<td style="vertical-align: middle; text-align: center;">
									<button class="btn btn-sm bg-light-blue color-palette" data-toggle="modal" data-target="#editModal" onclick="findOne({$T.record.id})">修改</button>
									<button class="btn btn-sm bg-red color-palette" ng-click="deleteOne(entity.id)">删除</button>
								</td>
							</tr>
						{#/for}
					</tbody>
				</table>
				<!-- 分页组件 -->
								<div class="row" style="text-align: right">
									<div class="col-sm-12"><div class="dataTables_paginate paging_bootstrap" id="sample-table_paginate">
										<ul class="pagination">
											 {#if $T.data.pageNumber==1}
												<li>
													<li class="prev"><a disabled style="cursor: not-allowed" href="#">上一页</a></li>
											   </li>
										    {#else}
												<li>
													<li class="prev"><a href="javascript:loadData({$T.data.pageNumber-1});">上一页</a></li>
												</li>
										    {#/if}
										    
										    {#foreach $T.data.numbers as record}
											      <li lang="nums"><a href="javascript:loadData({$T.record});">{$T.record}</a></li>
											   {#/for}
											
												{#if $T.data.pageNumber==$T.data.pageCount}
													<li>
													<li class="next"><a disabled style="cursor: not-allowed" >下一页</a></li>
												</li>
												{#else}
													<li>
														<li class="next"><a href="javascript:loadData({$T.data.pageNumber+1});">下一页</a></li>
												    </li>
												{#/if}

											<li class="next"><a href="#" >共{$T.data.pageNumber}/{$T.data.pageCount}页</a></li>
											<li class="next"><a href="#">共{$T.data.totalCount}条</a></li>
										</ul>
									</div>
									</div>
								</div>
							<!-- 分页组件 -->
			<!-- Data End -->
			</textarea>
			<!-- 数据展示区 -->
			<div id="res"></div>

			<!-- Paging Start -->
			<div class="clearfix">
				<div class="pull-left">
					<tm-pagination conf="paginationConf"></tm-pagination>
				</div>
				<div class="pull-right" style="height: 70px; line-height: 70px;">
					<button class="btn btn-sm btn-default" onclick="window.print();">打印</button>
				</div>
			</div>
			<!-- Paging End -->
		</div>
		<!-- Box Body End -->

		<!-- Modal Start -->
	<form id="updateForm">
		<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">
							<small>内容编辑</small>
						</h4>
					</div>
					<div class="modal-body">
						<table class="table table-bordered table-striped table-hover dataTable" width="800px" style="margin-bottom: 0px;">
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容标题</td>
								<td style="vertical-align: middle; text-align: left;">
									<input name="id" id="id" type="hidden" />
									<input type="text" class="form-control" name="title" id="title" placeholder="内容标题">
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容地址</td>
								<td style="vertical-align: middle; text-align: left;">
									<input type="text" class="form-control" name="url" id="url" placeholder="内容地址"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容图片</td>
								<td style="vertical-align: middle; text-align: left;">
									<div class="width:100%;height:40px;line-height:40px;clear:both">
										<input type="file" id="file_update" style="display: inline-block;outline: none;" onchange="upload_image_update()">
								  </div>
									<div>
										 <img name="image" id="img_show_update" height="200px" width="100%" style="margin-top: 10px; border: 1px solid gray;">
										 <!--藏值-->
										  <input type="hidden" id="upload_img_update_pic" name="image" />
									</div>
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容排序</td>
								<td style="vertical-align: middle; text-align: left;">
									<input type="text" class="form-control"  name="orders" id="orders"  placeholder="内容排序"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容状态</td>
								<td style="vertical-align: middle; text-align: left;">
									
										<input type="radio" lang="status" name="status" value="1"/>启用
									  <input type="radio" lang="status" name="status" value="0"/>禁用
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">广告类别</td>
								<td style="vertical-align: middle; text-align: left;">
									<select class="form-control" id="updateSelect" name="categoryId"></select>
								</td>
							</tr>

						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" aria-hidden="true">关闭</button>
						<button type="button" class="btn btn-success pull-right" data-dismiss="modal" aria-hidden="true" onclick="update()">更新</button>
					</div>
				</div>
			</div>
		</div>
	</form>
		<!-- Modal End -->
		
		
		
		<!-- Modal Start -->
		<form id="addForm">
		<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">
							<small>内容新增</small>
						</h4>
					</div>
					<div class="modal-body">
						<table class="table table-bordered table-striped table-hover dataTable" width="800px" style="margin-bottom: 0px;">
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容标题</td>
								<td style="vertical-align: middle; text-align: left;">
									<input type="text" class="form-control" name="title" placeholder="内容标题"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容地址</td>
								<td style="vertical-align: middle; text-align: left;">
									<input type="text" class="form-control" name="url" placeholder="内容地址"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容图片</td>
								<td style="vertical-align: middle; text-align: left;">
									<div class="width:100%;height:40px;line-height:40px;clear:both">
										<input type="file" id="file_add" style="display: inline-block;outline: none;" onchange="upload_image_add();"></div>
										<div ng-if="entity.image!=null">
											<img id="img_show_add" src="" height="200px" width="100%" style="margin-top: 10px; border: 1px solid gray;">
										  <!--藏值-->
										  <input type="hidden" id="upload_img_add_pic" name="image" />
										</div>
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容排序</td>
								<td style="vertical-align: middle; text-align: left;">
									  <input type="text" class="form-control" name="orders" placeholder="内容排序"></td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">内容状态</td>
								<td style="vertical-align: middle; text-align: left;">
									<input type="radio" name="status" value="1" checked/>启用
									<input type="radio" name="status" value="0" />禁用
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle; text-align: center;">广告类别</td>
								<td style="vertical-align: middle; text-align: left;">
									<select class="form-control" id="addSelect" name="categoryId"></select>
								</td>
							</tr>

						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal" aria-hidden="true">关闭</button>
						<button type="button" class="btn btn-success pull-right" data-dismiss="modal" aria-hidden="true" onclick="save()">新增</button>
					</div>
				</div>
			</div>
		</div>
		</form>
		<!-- Modal End -->
		
		
	</div>
	<!-- Page Wrapper End -->
	<!-- JQuery -->
	<script type="text/javascript" src="../plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script type="text/javascript" src="../plugins/bootstrap/js/bootstrap.min.js"></script>
	<!-- SlimScroll -->
	<script type="text/javascript" src="../plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script type="text/javascript" src="../plugins/fastclick/fastclick.min.js"></script>
	<!-- AdminLTE -->
	<script type="text/javascript" src="../plugins/adminlte/js/adminlte.min.js"></script>
	<!-- zeroModal -->
	<script type="text/javascript" src="../plugins/zeroModal/js/zeroModal.min.js"></script>
	<!-- iCheck -->
	<script type="text/javascript" src="../plugins/iCheck/icheck.min.js"></script>
	<!--引入模板引擎-->
	<script src="../js/jquery.jtemplates.js" type="text/javascript"></script>
	<!--引入外部JS-->
	<script src="../js/tbContent.js" type="text/javascript"></script>
</html>
